<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Crash Casino - –ü—Ä–æ—Å—Ç–∞—è —Ä–∞–∫–µ—Ç–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* ‚úÖ –ü–†–û–°–¢–ê–Ø –†–ê–ö–ï–¢–ê –í –í–ï–†–•–£ –≠–ö–†–ê–ù–ê */
        .rocket-area {
            position: fixed;
            top: 20px;
            left: 0;
            right: 0;
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            pointer-events: none;
        }
        
        .rocket-emoji {
            font-size: 80px;
            transition: all 0.3s ease;
            text-shadow: 0 0 30px rgba(255,255,255,0.8);
        }
        
        .rocket-ready {
            transform: scale(1.1);
            filter: drop-shadow(0 0 20px #4ecdc4);
        }
        
        .rocket-flying {
            transform: scale(1.3) translateY(-20px);
            filter: drop-shadow(0 0 40px #f39c12);
            animation: shake 0.1s infinite;
        }
        
        @keyframes shake {
            0%, 100% { transform: scale(1.3) translateY(-20px) rotate(0deg); }
            25% { transform: scale(1.3) translateY(-18px) rotate(5deg); }
            75% { transform: scale(1.3) translateY(-22px) rotate(-5deg); }
        }
        
        .rocket-exploded {
            transform: scale(1.5);
            filter: drop-shadow(0 0 50px #e74c3c);
            animation: explodePulse 0.5s ease-out;
        }
        
        @keyframes explodePulse {
            0% { transform: scale(1.3) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.8) rotate(180deg); opacity: 0.8; }
            100% { transform: scale(1.5) rotate(360deg); opacity: 1; }
        }
        
        .container {
            max-width: 400px;
            margin: 160px auto 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .title {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .multiplier-display {
            background: rgba(0,0,0,0.9);
            border: 4px solid;
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            margin-bottom: 25px;
            backdrop-filter: blur(20px);
        }
        
        .multiplier-betting { border-color: #4ecdc4; box-shadow: 0 0 30px rgba(78,205,196,0.5); }
        .multiplier-flying { border-color: #f39c12; box-shadow: 0 0 30px rgba(243,156,18,0.5); }
        .multiplier-crashed { border-color: #e74c3c; box-shadow: 0 0 30px rgba(231,76,60,0.5); }
        
        .current-multiplier {
            font-size: 60px;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: monospace;
        }
        
        .status { font-size: 20px; font-weight: 600; margin: 10px 0; }
        .countdown { font-size: 32px; font-weight: bold; }
        
        .balance-section {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            border: 2px solid rgba(78,205,196,0.4);
            text-align: center;
        }
        
        .balance { font-size: 24px; font-weight: bold; color: #4ecdc4; }
        
        .bet-section {
            background: rgba(0,0,0,0.6);
            border-radius: 20px;
            padding: 25px;
        }
        
        .bet-input {
            width: 100%;
            padding: 18px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 15px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 20px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .quick-bets {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .quick-bet-btn, .crash-btn, .cashout-btn {
            padding: 15px;
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quick-bet-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
        }
        
        .crash-btn {
            width: 100%;
            background: linear-gradient(45deg, #4ecdc4, #45b7d1);
            font-size: 20px;
            padding: 20px;
        }
        
        .cashout-btn {
            width: 100%;
            background: linear-gradient(45deg, #f39c12, #e67e22);
            font-size: 20px;
            display: none;
        }
        
        button:hover:not(:disabled) { transform: scale(1.05); }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .status-betting { color: #4ecdc4; }
        .status-flying { color: #f39c12; }
        .status-crashed { color: #e74c3c; }
    </style>
</head>
<body>
    <!-- ‚úÖ –ü–†–û–°–¢–ê–Ø –≠–ú–û–î–ó–ò –†–ê–ö–ï–¢–ê –í –í–ï–†–•–£ -->
    <div class="rocket-area">
        <div class="rocket-emoji rocket-ready" id="rocketEmoji">üöÄ</div>
    </div>
    
    <div class="container">
        <div class="title">CRASH –ö–ê–ó–ò–ù–û</div>
        
        <div class="multiplier-display multiplier-betting" id="multiplierDisplay">
            <div class="current-multiplier" id="multiplier">1.00x</div>
            <div class="status status-betting" id="statusText">üü¢ –°–¢–ê–í–ö–ò –û–¢–ö–†–´–¢–´</div>
            <div class="countdown" id="countdown">7.0—Å</div>
        </div>
        
        <div class="balance-section">
            <div class="balance" id="balance">‚≠ê 1000.00</div>
        </div>
        
        <div class="bet-section">
            <input type="number" id="betInput" class="bet-input" value="10" min="1" max="500">
            
            <div class="quick-bets">
                <button class="quick-bet-btn" onclick="setBet(10)">10‚≠ê</button>
                <button class="quick-bet-btn" onclick="setBet(25)">25‚≠ê</button>
                <button class="quick-bet-btn" onclick="setBet(50)">50‚≠ê</button>
                <button class="quick-bet-btn" onclick="setBet(100)">100‚≠ê</button>
            </div>
            
            <button id="crashBtn" class="crash-btn" onclick="placeBet()">üöÄ –°–¢–ê–í–ò–¢–¨</button>
            <button id="cashoutBtn" class="cashout-btn" onclick="cashout()">üí∞ –í–´–í–û–î</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        let gameState = 'betting';
        let currentMultiplier = 1.00;
        let betAmount = 10;
        let userBalance = 1000;
        let gamePhase = 0; // 0=betting, 1=flying, 2=crashed
        let phaseTime = 0;
        
        // ‚úÖ –°–¢–ê–†–¢ –ò–ì–†–´
        function startGame() {
            document.getElementById('balance').textContent = `‚≠ê ${userBalance.toFixed(2)}`;
            document.getElementById('betInput').value = betAmount;
            updateButtons();
            gameLoop();
        }
        
        // ‚úÖ –û–°–ù–û–í–ù–û–ô –¶–ò–ö–õ
        function gameLoop() {
            phaseTime += 0.1;
            
            if (gamePhase === 0) { // 7 —Å–µ–∫ –°–¢–ê–í–ö–ò
                const timeLeft = Math.max(0, 7 - phaseTime).toFixed(1);
                document.getElementById('countdown').textContent = `${timeLeft}—Å`;
                
                if (phaseTime >= 7) {
                    gamePhase = 1;
                    phaseTime = 0;
                    currentMultiplier = 1.00;
                    rocketFlying();
                }
            }
            else if (gamePhase === 1) { // –ü–û–õ–Å–¢
                currentMultiplier = 1.0 + (phaseTime * 4.0);
                document.getElementById('multiplier').textContent = `${currentMultiplier.toFixed(2)}x`;
                
                if (phaseTime >= 3 || currentMultiplier > 12) {
                    gamePhase = 2;
                    phaseTime = 0;
                    rocketExplode();
                }
            }
            else if (gamePhase === 2) { // –ü–ê–£–ó–ê 1 —Å–µ–∫
                if (phaseTime >= 1) {
                    gamePhase = 0;
                    phaseTime = 0;
                    currentMultiplier = 1.00;
                    rocketReady();
                }
            }
            
            updateDisplay();
            setTimeout(gameLoop, 100);
        }
        
        // ‚úÖ –†–ê–ö–ï–¢–ê - –ì–û–¢–û–í–ê
        function rocketReady() {
            const rocket = document.getElementById('rocketEmoji');
            rocket.textContent = 'üöÄ';
            rocket.className = 'rocket-emoji rocket-ready';
        }
        
        // ‚úÖ –†–ê–ö–ï–¢–ê - –õ–ï–¢–ò–¢
        function rocketFlying() {
            const rocket = document.getElementById('rocketEmoji');
            rocket.textContent = 'üöÄ';
            rocket.className = 'rocket-emoji rocket-flying';
        }
        
        // ‚úÖ –†–ê–ö–ï–¢–ê - –í–ó–†–´–í
        function rocketExplode() {
            const rocket = document.getElementById('rocketEmoji');
            rocket.textContent = 'üí•';
            rocket.className = 'rocket-emoji rocket-exploded';
        }
        
        // ‚úÖ –û–ë–ù–û–í–õ–ï–ù–ò–ï –≠–ö–†–ê–ù–ê
        function updateDisplay() {
            const display = document.getElementById('multiplierDisplay');
            const status = document.getElementById('statusText');
            const crashBtn = document.getElementById('crashBtn');
            const cashoutBtn = document.getElementById('cashoutBtn');
            
            if (gamePhase === 0) {
                display.className = 'multiplier-display multiplier-betting';
                status.textContent = 'üü¢ –°–¢–ê–í–ö–ò –û–¢–ö–†–´–¢–´';
                status.className = 'status status-betting';
                crashBtn.disabled = false;
                crashBtn.style.display = 'block';
                cashoutBtn.style.display = 'none';
            } else {
                display.className = 'multiplier-display multiplier-flying';
                status.textContent = `üìà x${currentMultiplier.toFixed(2)}`;
                status.className = 'status status-flying';
                crashBtn.style.display = 'none';
                if (betAmount > 0) cashoutBtn.style.display = 'block';
            }
            updateButtons();
        }
        
        // ‚úÖ –ö–ù–û–ü–ö–ò
        function updateButtons() {
            document.getElementById('crashBtn').textContent = `üöÄ –°–¢–ê–í–ò–¢–¨ ${betAmount}‚≠ê`;
        }
        
        // ‚úÖ –ë–´–°–¢–†–ê–Ø –°–¢–ê–í–ö–ê
        function setBet(amount) {
            if (gamePhase !== 0) {
                tg.showAlert('‚è≥ –î–æ–∂–¥–∏—Ç–µ—Å—å —Å—Ç–∞–≤–æ–∫!');
                return;
            }
            betAmount = amount;
            document.getElementById('betInput').value = amount;
            updateButtons();
        }
        
        // ‚úÖ –°–¢–ê–í–ö–ê
        function placeBet() {
            betAmount = parseFloat(document.getElementById('betInput').value) || 10;
            
            if (gamePhase !== 0) {
                tg.showAlert('‚è≥ –°—Ç–∞–≤–∫–∏ –∑–∞–∫—Ä—ã—Ç—ã!');
                return;
            }
            if (betAmount < 1 || betAmount > userBalance) {
                tg.showAlert(`‚ùå –°—Ç–∞–≤–∫–∞ 1-${userBalance.toFixed(0)}‚≠ê`);
                return;
            }
            
            document.getElementById('crashBtn').style.display = 'none';
            document.getElementById('cashoutBtn').style.display = 'block';
        }
        
        // ‚úÖ –í–´–í–û–î
        function cashout() {
            if (betAmount <= 0 || gamePhase !== 1) {
                tg.showAlert('‚è≥ –ü–æ–ª—ë—Ç!');
                return;
            }
            
            const winAmount = betAmount * currentMultiplier;
            const profit = winAmount - betAmount;
            userBalance += profit;
            
            tg.showAlert(`üéâ +${profit.toFixed(2)}‚≠ê!\n‚≠ê –ë–∞–ª–∞–Ω—Å: ${userBalance.toFixed(2)}‚≠ê`);
            document.getElementById('balance').textContent = `‚≠ê ${userBalance.toFixed(2)}`;
            
            betAmount = 10;
            document.getElementById('betInput').value = '10';
            tg.MainButton.setText('üîÑ –ù–û–í–ê–Ø –ò–ì–†–ê').show();
        }
        
        tg.MainButton.onClick(() => {
            tg.MainButton.hide();
            betAmount = 10;
            document.getElementById('betInput').value = '10';
            document.getElementById('crashBtn').style.display = 'block';
            document.getElementById('cashoutBtn').style.display = 'none';
            updateButtons();
        });
        
        // ‚úÖ –°–¢–ê–†–¢
        window.onload = () => {
            setTimeout(startGame, 300);
        };
    </script>
</body>
</html>
